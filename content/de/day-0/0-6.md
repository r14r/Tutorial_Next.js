## Einheit 6 —  Daten hochladen & exportieren

### Lehrbuch — Grundlagen & Hintergründe

Viele KI-Apps erwarten Datei-Uploads (CSV, Bilder) und bieten Exporte an. In Streamlit ist dies mit `st.file_uploader` und `st.download_button` trivial.

### Beispiele

```python
# upload-and-export
import pandas as pd
import streamlit as st

st.title("Daten-Upload & Export")

file = st.file_uploader("CSV hochladen", type="csv")
if file:
    df = pd.read_csv(file)
    st.dataframe(df)
    csv = df.to_csv(index=False).encode()
    st.download_button("CSV herunterladen", csv, "export.csv")
```

### Übungen

1) Bild hochladen und anzeigen.  
2) Mehrere CSVs zusammenführen.

### Lösungen

```python
# solution-image-upload
img_file = st.file_uploader("Bild hochladen", type=["jpg", "png"])
if img_file:
    st.image(img_file)
```

```python
# solution-merge-cvs
files = st.file_uploader("Mehrere CSVs hochladen", type="csv", accept_multiple_files=True)
if files:
    dfs = [pd.read_csv(f) for f in files]
    merged = pd.concat(dfs, ignore_index=True)
    st.dataframe(merged)
```

---

### Beispiele

```python
# upload-export.py
import pandas as pd
import streamlit as st

st.title("Daten-Upload & Export")

file = st.file_uploader("CSV hochladen", type="csv")
if file:
    df = pd.read_csv(file)
    st.dataframe(df)
    csv = df.to_csv(index=False).encode()
    st.download_button("CSV herunterladen", csv, "export.csv")
```

#### KI-Integration: Hochgeladene CSV zusammenfassen mit Ollama SDK

```python
# upload-ollama.py
import pandas as pd
import streamlit as st
from lib.helper_ollama import ollama

st.title("CSV-Upload & KI-Zusammenfassung")
file = st.file_uploader("CSV hochladen", type="csv")
if file:
    df = pd.read_csv(file)
    st.dataframe(df)
    stats = df.describe().to_string()
    prompt = f"Fasse die wichtigsten Erkenntnisse aus diesen Daten zusammen:\n{stats}"
    result = ollama.generate(prompt)
    st.write(result)
```

#### KI-Integration: Streamlit-App für Textzusammenfassung mit Ollama SDK

```python
# streamlit-ollama.py
import streamlit as st
from lib.helper_ollama import ollama

st.title("Textzusammenfassung mit KI")
text = st.text_area("Text eingeben")
if st.button("Zusammenfassen") and text:
    prompt = f"Fasse den folgenden Text in 1 Satz zusammen:\n{text}"
    result = ollama.generate(prompt)
    st.write(result)
```

---

