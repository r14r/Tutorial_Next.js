## Einheit 7 — Kombination von Analysen (Sentiment + Keywords + Entities)

### Umfangreiche Beschreibung & Grundlagen

LLMs sind in der Lage, mehrere Analyseaufgaben in einem Schritt zu erledigen. Das bedeutet, man kann mit einem einzigen Prompt gleichzeitig die Stimmung, Schlüsselwörter, Named Entities und sogar Zusammenfassungen aus einem Text extrahieren lassen. Das spart Zeit und ermöglicht komplexe Auswertungen mit wenig Code.

**Warum ist die Kombination von Analysen nützlich?**

- Sie liefert ein umfassendes Bild eines Textes auf einen Blick.
- Sie spart Rechenzeit und vereinfacht Workflows.
- Sie ist ideal für Dashboards, Monitoring und automatisierte Reports.

**Herausforderungen:**

- Die Formatierung der Ausgabe muss klar vorgegeben werden.
- Die Ergebnisse müssen ggf. nachbearbeitet oder geparst werden.
- Bei sehr langen Texten kann das Kontextfenster des Modells überschritten werden.

### 5 Beispiele für kombinierte Analysen (mit Python-Code)

1. **Stimmung + Keywords:**

    Text:

    ```text
    "Das neue iPhone ist beeindruckend, aber sehr teuer."
    ```

    Ergebnis:

    ```text
    Stimmung: "Gemischt", Keywords: ["iPhone", "teuer"]
    ```

    ```python
    # Datei: kombi1_stimmung_keywords.py
    from lib.helper_ollama import ollama

    text = "Das neue iPhone ist beeindruckend, aber sehr teuer."
    prompt = f"Analysiere diesen Text und gib zurück:\n1. Stimmung (Positiv/Negativ/Neutral/Gemischt)\n2. Keywords als Liste\nText: {text}"
    result = ollama.generate(prompt)
    print("Analyse:", result)
    ```

2. **Alles in einem:**

    Text:

    ```text
    "Angela Merkel hielt in Berlin eine Rede über die EU."
    ```

    Ergebnis:

    ```text
    Stimmung, Keywords, Named Entities, Zusammenfassung
    ```

    ```python
    # Datei: kombi2_alles.py
    from lib.helper_ollama import ollama

    text = "Angela Merkel hielt in Berlin eine Rede über die EU."
    prompt = f"Analysiere den Text und gib zurück:\n- Stimmung\n- Keywords\n- Named Entities\n- Kurze Zusammenfassung\nText: {text}"
    result = ollama.generate(prompt)
    print("Analyse:", result)
    ```

3. **JSON-Ausgabe:**

    Prompt:

    ```prompt
    "Analysiere den Text und gib das Ergebnis als JSON zurück: Stimmung, Keywords, Entities."
    ```

    ```python
    # Datei: kombi3_json.py
    from lib.helper_ollama import ollama

    text = "Tesla investiert in KI und baut neue Fabriken."
    prompt = f"Analysiere den Text und gib das Ergebnis als JSON zurück: Stimmung, Keywords, Entities. Text: {text}"
    result = ollama.generate(prompt)
    print("JSON-Analyse:", result)
    ```

4. **Mehrere Texte analysieren:**
    - Liste von Texten wird in einer Schleife analysiert
    - Ergebnisse werden gesammelt.

    ```python
    # Datei: kombi4_mehrere.py
    from lib.helper_ollama import ollama

    texte = [
        "Das neue iPhone ist beeindruckend, aber sehr teuer.",
        "Angela Merkel hielt in Berlin eine Rede über die EU.",
        "Tesla investiert in KI und baut neue Fabriken."
    ]
    for text in texte:
        prompt = f"Analysiere den Text und gib das Ergebnis als JSON zurück: Stimmung, Keywords, Entities. Text: {text}"
        result = ollama.generate(prompt)
        print(f"Text: {text}\nAnalyse: {result}\n")
    ```

5. **Dashboard-Anwendung:**
    - Ein Streamlit-Dashboard zeigt für jeden Text alle Analyse-Ergebnisse übersichtlich an.

    ```python
    # Datei: kombi5_dashboard.py
    import streamlit as st
    from lib.helper_ollama import ollama

    st.title("Kombinierte Textanalyse")
    text = st.text_area("Text eingeben")
    if st.button("Analysieren") and text:
        prompt = f"Analysiere den Text und gib das Ergebnis als JSON zurück: Stimmung, Keywords, Entities, Zusammenfassung. Text: {text}"
        result = ollama.generate(prompt)
        st.write("Analyse:", result)
    ```

### 10 Fragen & Lösungen zu kombinierten Analysen

1. **Was bedeutet kombinierte Analyse bei LLMs?**
    - *Lösung:* Mehrere Analyseaufgaben (z. B. Stimmung, Keywords, Entities) werden in einem Schritt erledigt.
2. **Was ist ein Vorteil kombinierter Analysen?**
    - *Lösung:* Spart Zeit, liefert umfassende Ergebnisse.
3. **Wie kann man die Ausgabe strukturieren?**
    - *Lösung:* Durch klare Vorgaben im Prompt, z. B. Listen oder JSON.
4. **Was ist ein Nachteil bei sehr langen Texten?**
    - *Lösung:* Das Kontextfenster des Modells kann überschritten werden.
5. **Wie kann man kombinierte Analysen in einer App nutzen?**
    - *Lösung:* In Dashboards, Monitoring-Tools, Reports.
6. **Wie kann man die Ergebnisse weiterverarbeiten?**
    - *Lösung:* Durch Parsen der Ausgabe (z. B. JSON in Python).
7. **Was ist ein Beispiel für eine kombinierte Analyse?**
    - *Lösung:* Stimmung, Keywords und Entities aus einem Text extrahieren.
8. **Wie kann man mehrere Texte automatisch analysieren?**
    - *Lösung:* Mit einer Schleife und einer Analysefunktion.
9. **Wie kann man die Qualität der kombinierten Analyse verbessern?**
    - *Lösung:* Durch präzise Prompts und Formatvorgaben.
10. **Was ist ein typischer Fehler bei kombinierten Analysen?**
    - *Lösung:* Unklare Formatvorgaben, zu lange Texte, fehlende Nachbearbeitung.

---

